[ [GUIのチュートリアル indexへ戻る](../../../Documents/GUIのチュートリアル(CueMol2)/)|
[&lt;--前に戻る](../../../Documents/GUIのチュートリアル(CueMol2)/Step5)|
[次へ--&gt;](../../../Documents/GUIのチュートリアル(CueMol2)/Step7) ]

## シーンの保存と読み込み

以下に説明するように，シーンをファイルに保存しておくと，
CueMol2を終了し再度起動した場合などに，
再び同じシーンを呼び出すことができるようになります．

さらにCueMol2では，複数のシーンを作成し扱うことが可能です．

### シーンの保存
現在読み込んだり，編集してきたlysozyme等の分子は，
Untitled 1というデフォルトの名前がついた，シーンに含まれています．

メニュー「File」→「Save scene」を実行すると，シーンを保存するダイアログが表示されます((シーン名がデフォルトでまだディスク上に保存されていないシーンの場合は，このようにファイルの保存ダイアログが表示されるが，すでに一度保存している，あるいはディスクから読み込んだシーンである場合は，同じqscファイルに上書き保存される))．
ここでは，適当なフォルダ中に，**tutorial1.qsc**という名前で保存してください．
（デフォルトでは，ファイル名は，現在のシーン名+.qscという名前になっています．すなわち，Untitled 1.qsc）

保存すると，シーンの名前もUntitled 1から，tutorial1.qscに変化したと思います．

あと，シーン保存の副作用として，**Undo情報はすべて消えてしまう**ので
注意してください．

### シーンの読み込み
次に，いったんCueMol2を終了して，再度，起動してください．
そして，メニュー「File」→「Open scene」を実行すると
ファイルを開くダイアログが表示されるので，先ほど保存したtutorial1.qscを読み込んでください．図のように，保存時のシーンが再び読み込まれていると思います．


![gui_step6_scene_saved1](../../../assets/images/Documents/GUIのチュートリアル(CueMol2)/Step6/gui_step6_scene_saved1.png){ style="zoom: 0.5" .on-glb }


このように，セッションをファイルに書出しておけば，
CueMolを次回起動した場合などに，
書き出した時点の状態を再現することができます．

### 複数シーンを扱う
次に，メニュー「File」→「New tab」を実行してください（あるいはツールバーの![toolbar_newtab1](../../../assets/images/Documents/GUIのチュートリアル(CueMol2)/Step6/toolbar_newtab1.png)ボタンを押す)．

以下のように，新規タブ作成ダイアログが表示されます．

![gui_step6_newtab1](../../../assets/images/Documents/GUIのチュートリアル(CueMol2)/Step6/gui_step6_newtab1.png)


Name:のところを変更すると作成するシーン名を変更できますが，ここではデフォルトのままにしておきます．

OKボタンを押すと，新規シーンが作成され，そのシーンを表示する新たなタブが作成されます．


![gui_step6_new_scene1](../../../assets/images/Documents/GUIのチュートリアル(CueMol2)/Step6/gui_step6_new_scene1.png)


当たり前ですが，新規作成されたシーンは空っぽで何もないため，
真っ黒で何も表示されていません．また，シーンパネルのところも空になっていることが分かります．

ここで，次に
メニュー「File」→「Get PDB using accession code...」を実行し，

*  次に出てくるダイアログには**1EHZ**と入力してOKを押し，
*  さらに次に出てくるダイアログでは，Renderer type:の所を**nucl**に変更してOKを押す

を実行すると，1EHZ（tRNA(Phe)の構造）が新たに作られたシーンに読み込まれ，
その全体がnuclレンダラーで表示されます．（詳しくは[分子構造の読み込み](../../../Documents/GUIのチュートリアル(CueMol2)/Step1)参照）


![gui_step6_1ehz](../../../assets/images/Documents/GUIのチュートリアル(CueMol2)/Step6/gui_step6_1ehz.png){ style="zoom: 0.5" .on-glb }


一方，tutorial1.qscシーンのタブをクリックすると，そちらのシーンが再度表示され，シーンパネルの内容も，tutorial1.qscの内容に変わっていると思います．

### Tabを閉じる
次に，今作成したUntitled 1というタブを閉じてみましょう．タブの右端にある閉じる（×）ボタンを押してください．

ここで，Untitled 1には今1EHZ.pdbという分子を読み込んで変更してしまっている状態なので，保存するかどうか聞いてきます．


![gui-step6-closetab1](../../../assets/images/Documents/GUIのチュートリアル(CueMol2)/Step6/gui-step6-closetab1.png)


Yesを押すと，シーンを名前を付けて保存するダイアログが表示され，保存後タブが閉じられます．
Noを押すと，保存することなくタブが閉じられます．
Cancelを押すと，タブのクローズ自体がキャンセルされます．

このように，シーンが何らかの変更を受けていると，閉じるときに保存を促すダイアログが出てきます．一方で，すでに保存されていたり，何も変更されていなかったりする場合は，ダイアログが出てこないで，いきなり閉じられます．
### 注意点

セッションの保存には，version 2.0.0.94の時点で
以下のような制限事項があります．

*  qscシーンファイル中には，基本的に，ファイルへのリンクが保持されている．そのため，読み込んだ元のファイルを削除してしまうとqscファイルが正しく読込みできなくなる．
    *  ファイルへのリンクは，相対パスで保存されているため，qscファイルとPDB等のリンク先の相対関係を維持するように（同じフォルダにあるなら同じフォルダへ）移動すればリンク切れが起こらない．
    *  逆に，qscだけやPDBファイルだけを移動してしまうとリンク切れになって読み込めなくなる．
*  ただし，CueMolを使ってネット上から読み込んだ分子オブジェクトや，分子重ね合わせをやって動かしたりした分子オブジェクトは，qscファイル中に埋め込まれて保存されている．

一応，できるだけオブジェクトとレンダラーの状態が
書出し・読込みで維持されるように確認していますが，
不具合などがありましたら，ご一報いただけるとありがたいです．

[ [&lt;--前に戻る](../../../Documents/GUIのチュートリアル(CueMol2)/Step5)|
[次へ--&gt;](../../../Documents/GUIのチュートリアル(CueMol2)/Step7) ]